!function(r){"use strict";function t(r){r=r||"2.0";var t="v"+String(r).match(/(\d{1,}(\.\d{1,})?)/)[1];return t+=1===t.split(".").length?".0":"",s+t+"/schema.json"}function o(r,t){try{if(!r._)throw new Error("LoDash library not found");return r._}catch(r){t.error(r)}}function n(r,t){try{if(!r.jsyaml)throw new Error("JS-YAML library not found");return r.jsyaml}catch(r){t.error(r)}}function e(r,t){try{if(!r.showdown)throw new Error("Showdown library not found");return r.showdown}catch(r){t.error(r)}}function a(r){return function(t){if("string"==typeof t)try{if(!_.isObject(showdown))throw new Error("Showdown library not found.");var o=new showdown.Converter({ghCodeBlocks:!0,tasklists:!0,tables:!0,omitExtraWLInCodeBlocks:!0});return o.makeHtml(t)}catch(t){return void r.error(t)}}}function c(o,n,e,a,c,i){function s(t,n){a.$broadcast("swankloading");var c=r.extend(this,u);r.merge(c.options,n||{});try{if(!t||null===t)throw new Error("No document supplied.")}catch(r){return a.$broadcast("swankloaded"),void o.error(r)}var i=[c.load(c,t),c.fetchSchema,c.validateDocument,c.loadTags];return e.series(i).then(function(r){a.$broadcast("swankloaded"),o.info(r),c.logErrors()}),c}var u={errors:[],doc:{},objects:{tagnames:[]},options:{orderPaths:"tag"}};return s.prototype.load=function(r,t){var a=e.defer(),c=_.isString(t)&&t.match(/[yaml|yml]$/gi);if(c&&console.log("YAML supplied."),_.isString(t)&&t.match(/^http/))n.get(t).then(function(t){var o=c?i.load(t.data):t.data;console.log(o),a.resolve({ref:r,doc:o})},function(r,t){o.error(r,t),a.reject(r)});else if(_.isObject(t))a.resolve({ref:r,doc:t});else try{var s=c?i.load(t):JSON.parse(t);a.resolve({ref:r,doc:s})}catch(r){o.error("Invalid JSON: "+r.message.split("in JSON")[0].trim()),a.reject(r)}return a.promise},s.prototype.fetchSchema=function(r){var a=e.defer(),c=r.ref,i=r.doc;return c.options.schemaUrl=t(i.version||null),n.get(c.options.schemaUrl).then(function(r){a.resolve({ref:c,schema:r.data,doc:i})},function(r,t){a.reject(r),o.error(r,t)}),a.promise},s.prototype.validateDocument=function(r){var t,n=e.defer(),a=r.ref,c=r.schema,i=r.doc;try{if(t=new ZSchema({breakOnFirstError:!1}),!_.isObject(t))throw new Error("ZSchema library not found.");t.setRemoteReference(a.options.schemaUrl,c);var s=t.validate(i,{$ref:a.options.schemaUrl});a.errors=s?[]:t.getLastErrors(),a.doc=i,n.resolve({ref:a})}catch(r){o.error(r),n.reject(r)}return n.promise},s.prototype.loadTags=function(r){var t=r.ref,o=e.defer();if(0===t.errors.length){if(t.doc.tags=t.doc.tags||[],_.isEmpty(t.doc.tags)){console.log(t.doc);var n=_.uniq(c.valuesByKey(t.doc.paths,"tags"));t.doc.tags=_.map(n,function(r){return{name:r}})}o.resolve({ref:t})}return o.promise},s.prototype.logErrors=function(){var r=this;_.forEach(r.errors,function(r){o.error(r.code+": "+r.message+". Under "+r.path.replace("#/","{ROOT}/")+".")})},s.prototype.groupPaths=function(r){var t=this;a.$broadcast("swankloading");var n=["route","method","tag"];r&&n.indexOf(r)!==-1?(t.options.orderPaths=r,t.parse().then(function(){a.$broadcast("swankloaded")})):(a.$broadcast("swankloaded"),o.warn("Invalid group-by option for Swank."))},s}function i(t){return t.series=function(o){var n,e=t.when(),a=r.isArray(o)?[]:{},c=new Error,i=function(t,o){if(!t||!r.isFunction(t.then))throw c.message="Task "+o+" did not return a promise.",c};return r.forEach(o,function(r,o){var c,s=r.success||r,u=r.fail,f=r.notify;if(n)c=n.then(function(r){if(!s)return r;a[o]=r;var t=s(r);return i(t,o),t},function(r){if(!u)return t.reject(r);var n=u(r);return i(n,o),n},f);else{var h="function"==typeof s?s():r;c=h.then(function(r){return a[o]=r,r},function(r){return t.reject(r)}),i(c,o)}n=c,e=e.then(n)}),e.then(function(){var r=t.defer();return r.resolve(a),r.promise})},t}var s="https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/";o.$inject=["$window","$log"],n.$inject=["$window","$log"],e.$inject=["$window","$log"],a.$inject=["$log"],c.$inject=["$log","$http","$q","$rootScope","Helpers","jsyaml"],i.$inject=["$delegate"],r.module("swank",[]).config(["$provide",function(r){r.decorator("$q",i)}]).factory("_",o).factory("jsyaml",n).factory("Showdown",e).filter("parseMD",a).factory("Swank",c)}(angular),function(r){"use strict";function t(){function r(){}return r}t.$inject=[],r.module("swank").factory("SwankDefinitions",t)}(angular),function(r){"use strict";function t(){return{valuesByKey:function(r,t,o){var n=this;return o=o||[],_.flatten(_.map(r,function(r){return r[t]&&_.forEach(r[t],function(r){o.push(r)}),_.isObject(r)&&!_.isArray(r)?n.valuesByKey(r,t,o):o}))}}}r.module("swank").factory("Helpers",t)}(angular),function(r){"use strict";function t(){function t(t,o){r.extend(this,{})}return t}r.module("swank").factory("SwankOperation",t)}(angular),function(r){"use strict";function t(t){function o(t){var o=r.extend(this,t||{});return o}return o.prototype.parse=function(){},o}t.$inject=["SwankOperation"],r.module("swank").factory("SwankPath",t)}(angular),function(r){"use strict";function t(t){function o(t,o){var n=r.extend(this,{paths:{}});return"route"===o.orderPaths&&n.byRoute(t),"method"===o.orderPaths&&n.byMethod(t),"tag"===o.orderPaths&&n.byTag(t,o.tags),n}return o.prototype.byRoute=function(r){var o=this;_.forEach(r,function(r,n){o.paths[n]=new t(r)})},o.prototype.byMethod=function(r){var t=this;t.paths={get:{},put:{},post:{},delete:{},options:{},head:{},patch:{}},_.forEach(r,function(r,o){_.forEach(r,function(r,n){t.paths[n][o]=t.paths[n][o]||{},t.paths[n][o][n]=r})})},o.prototype.byTag=function(r,t){var o=this;t&&_.forEach(t,function(r){o.paths[r]={}}),o.paths.untagged={},_.forEach(r,function(r,t){_.forEach(r,function(r,n){var e=r.tags?r.tags:"untagged";_.forEach(e,function(e){o.paths[e]=o.paths[e]||{},o.paths[e][t]=o.paths[e][t]||{},o.paths[e][t][n]=r})})})},o}t.$inject=["SwankPath"],r.module("swank").factory("SwankPaths",t)}(angular);