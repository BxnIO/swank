!function(t){"use strict";function r(t){t=t||"2.0";var r="v"+String(t).match(/(\d{1,}(\.\d{1,})?)/)[1];return r+=1===r.split(".").length?".0":"",o+r+"/schema.json"}function e(e,n,o,a,s,c,i){function u(r,n){a.$broadcast("swankloading");var s=t.extend(this,f);t.merge(s.options,n||{});try{if(!r||null===r)throw new Error("No document supplied.")}catch(t){return a.$broadcast("swankloaded"),void e.error(t)}var c=[s.load(s,r),s.fetchSchema,s.validateDocument,s.loadTags];return o.series(c).then(function(t){a.$broadcast("swankloaded"),e.info(t),s.logErrors()}),s}var f={errors:[],doc:{},objects:{tagnames:[]},options:{orderPaths:"tag"}};return u.prototype.load=function(t,r){var a=o.defer();if(_.isString(r)&&r.match(/^http/))n.get(r).then(function(r){a.resolve({ref:t,doc:r.data})},function(t,r){e.error(t,r),a.reject(t)});else if(_.isObject(r))a.resolve({ref:t,doc:r});else try{var s=JSON.parse(r);a.resolve({ref:t,doc:s})}catch(t){e.error("Invalid JSON: "+t.message.split("in JSON")[0].trim()),a.reject(t)}return a.promise},u.prototype.fetchSchema=function(t){var a=o.defer(),s=t.ref,c=t.doc;return s.options.schemaUrl=r(c.version||null),n.get(s.options.schemaUrl).then(function(t){a.resolve({ref:s,schema:t.data,doc:c})},function(t,r){a.reject(t),e.error(t,r)}),a.promise},u.prototype.validateDocument=function(t){var r,n=o.defer(),a=t.ref,s=t.schema,c=t.doc;try{if(r=new ZSchema({breakOnFirstError:!1}),!_.isObject(r))throw new Error("ZSchema library not found.");r.setRemoteReference(a.options.schemaUrl,s);var i=r.validate(c,{$ref:a.options.schemaUrl});a.errors=i?[]:r.getLastErrors(),a.doc=c,n.resolve({ref:a})}catch(t){e.error(t),n.reject(t)}return n.promise},u.prototype.loadTags=function(t){var r=t.ref,e=o.defer();if(0===r.errors.length){if(r.doc.tags=r.doc.tags||[],_.isEmpty(r.doc.tags)){console.log(r.doc);var n=_.uniq(s.valuesByKey(r.doc.paths,"tags"));r.doc.tags=_.map(n,function(t){return{name:t}})}e.resolve({ref:r})}return e.promise},u.prototype.logErrors=function(){var t=this;_.forEach(t.errors,function(t){e.error(t.code+": "+t.message+". Under "+t.path.replace("#/","{ROOT}/")+".")})},u.prototype.groupPaths=function(t){var r=this;a.$broadcast("swankloading");var n=["route","method","tag"];t&&n.indexOf(t)!==-1?(r.options.orderPaths=t,r.parse().then(function(){a.$broadcast("swankloaded")})):(a.$broadcast("swankloaded"),e.warn("Invalid group-by option for Swank."))},u}function n(r){return r.series=function(e){var n,o=r.when(),a=t.isArray(e)?[]:{},s=new Error,c=function(r,e){if(!r||!t.isFunction(r.then))throw s.message="Task "+e+" did not return a promise.",s};return t.forEach(e,function(t,e){var s,i=t.success||t,u=t.fail,f=t.notify;if(n)s=n.then(function(t){if(!i)return t;a[e]=t;var r=i(t);return c(r,e),r},function(t){if(!u)return r.reject(t);var n=u(t);return c(n,e),n},f);else{var h="function"==typeof i?i():t;s=h.then(function(t){return a[e]=t,t},function(t){return r.reject(t)}),c(s,e)}n=s,o=o.then(n)}),o.then(function(){var t=r.defer();return t.resolve(a),t.promise})},r}var o="https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/";e.$inject=["$log","$http","$q","$rootScope","Helpers","SwankPaths","SwankDefinitions"],n.$inject=["$delegate"],t.module("swank",[]).config(["$provide",function(t){t.decorator("$q",n)}]).factory("Swank",e)}(angular),function(t){"use strict";function r(){function t(){}return t}r.$inject=[],t.module("swank").factory("SwankDefinitions",r)}(angular),function(t){"use strict";function r(){return{valuesByKey:function(t,r,e){var n=this;return e=e||[],_.flatten(_.map(t,function(t){return t[r]&&_.forEach(t[r],function(t){e.push(t)}),_.isObject(t)&&!_.isArray(t)?n.valuesByKey(t,r,e):e}))}}}t.module("swank").factory("Helpers",r)}(angular),function(t){"use strict";function r(){function r(r,e){t.extend(this,{})}return r}t.module("swank").factory("SwankOperation",r)}(angular),function(t){"use strict";function r(r){function e(r){var e=t.extend(this,r||{});return e}return e.prototype.parse=function(){},e}r.$inject=["SwankOperation"],t.module("swank").factory("SwankPath",r)}(angular),function(t){"use strict";function r(r){function e(r,e){var n=t.extend(this,{paths:{}});return"route"===e.orderPaths&&n.byRoute(r),"method"===e.orderPaths&&n.byMethod(r),"tag"===e.orderPaths&&n.byTag(r,e.tags),n}return e.prototype.byRoute=function(t){var e=this;_.forEach(t,function(t,n){e.paths[n]=new r(t)})},e.prototype.byMethod=function(t){var r=this;r.paths={get:{},put:{},post:{},delete:{},options:{},head:{},patch:{}},_.forEach(t,function(t,e){_.forEach(t,function(t,n){r.paths[n][e]=r.paths[n][e]||{},r.paths[n][e][n]=t})})},e.prototype.byTag=function(t,r){var e=this;r&&_.forEach(r,function(t){e.paths[t]={}}),e.paths.untagged={},_.forEach(t,function(t,r){_.forEach(t,function(t,n){var o=t.tags?t.tags:"untagged";_.forEach(o,function(o){e.paths[o]=e.paths[o]||{},e.paths[o][r]=e.paths[o][r]||{},e.paths[o][r][n]=t})})})},e}r.$inject=["SwankPath"],t.module("swank").factory("SwankPaths",r)}(angular);