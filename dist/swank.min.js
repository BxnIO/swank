!function(t){"use strict";function r(t){t=t||"2.0";var r="v"+String(t).match(/(\d{1,}(\.\d{1,})?)/)[1];return r+=1===r.split(".").length?".0":"",c+r+"/schema.json"}function o(t,r){try{if(!t._)throw new Error("LoDash library not found");return t._}catch(t){r.error(t)}}function n(t,r){try{if(!t.jsyaml)throw new Error("JS-YAML library not found");return t.jsyaml}catch(t){r.error(t)}}function e(t,r){try{if(!t.showdown)throw new Error("Showdown library not found");return t.showdown}catch(t){r.error(t)}}function a(t){return function(r){if("string"==typeof r)try{if(!_.isObject(showdown))throw new Error("Showdown library not found.");var o=new showdown.Converter({ghCodeBlocks:!0,tasklists:!0,tables:!0,omitExtraWLInCodeBlocks:!0});return o.makeHtml(r)}catch(r){return void t.error(r)}}}function i(o,n,e,a,i,s){function c(r,n){a.$broadcast("swankloading");var i=t.extend(this,u);t.merge(i.options,n||{});try{if(!r||null===r)throw new Error("No document supplied.")}catch(t){return a.$broadcast("swankloaded"),void o.error(t)}var s=[i.load(i,r),i.fetchSchema,i.validateDocument,i.loadTags];return e.series(s).then(function(t){a.$broadcast("swankloaded"),o.info(t),i.logErrors()}),i}var u={errors:[],doc:{},objects:{tagnames:[]},options:{orderPaths:"tag"}},f=function(r){return t.fromJson(t.toJson(r))};return c.prototype.load=function(t,r){var a=e.defer(),i=_.isString(r)&&r.match(/[yaml|yml]$/gi);if(_.isString(r)&&r.match(/^http/))n.get(r).then(function(r){var o=i?s.load(r.data):r.data;a.resolve({ref:t,doc:o})},function(t,r){o.error(t,r),a.reject(t)});else if(_.isObject(r))a.resolve({ref:t,doc:r});else try{var c=i?s.load(r):JSON.parse(r);a.resolve({ref:t,doc:c})}catch(t){o.error("Invalid JSON: "+t.message.split("in JSON")[0].trim()),a.reject(t)}return a.promise},c.prototype.exportYaml=function(){return s.dump(f(this.doc))},c.prototype.exportJson=function(){return f(t.toJson(this.doc))},c.prototype.fetchSchema=function(t){var a=e.defer(),i=t.ref,s=t.doc;return i.options.schemaUrl=r(s.version||null),n.get(i.options.schemaUrl).then(function(t){a.resolve({ref:i,schema:t.data,doc:s})},function(t,r){a.reject(t),o.error(t,r)}),a.promise},c.prototype.validateDocument=function(t){var r,n=e.defer(),a=t.ref,i=t.schema,s=t.doc;try{if(r=new ZSchema({breakOnFirstError:!1}),!_.isObject(r))throw new Error("ZSchema library not found.");r.setRemoteReference(a.options.schemaUrl,i);var c=r.validate(s,{$ref:a.options.schemaUrl});a.errors=c?[]:r.getLastErrors(),a.doc=s,n.resolve({ref:a})}catch(t){o.error(t),n.reject(t)}return n.promise},c.prototype.loadTags=function(t){var r=t.ref,o=e.defer();if(0===r.errors.length){if(r.doc.tags=r.doc.tags||[],_.isEmpty(r.doc.tags)){var n=_.uniq(i.valuesByKey(r.doc.paths,"tags"));r.doc.tags=_.map(n,function(t){return{name:t}})}o.resolve({ref:r})}return o.promise},c.prototype.logErrors=function(){var t=this;_.forEach(t.errors,function(t){o.error(t.code+": "+t.message+". Under "+t.path.replace("#/","{ROOT}/")+".")})},c.prototype.groupPaths=function(t){var r=this;a.$broadcast("swankloading");var n=["route","method","tag"];t&&n.indexOf(t)!==-1?(r.options.orderPaths=t,r.parse().then(function(){a.$broadcast("swankloaded")})):(a.$broadcast("swankloaded"),o.warn("Invalid group-by option for Swank."))},c}function s(r){return r.series=function(o){var n,e=r.when(),a=t.isArray(o)?[]:{},i=new Error,s=function(r,o){if(!r||!t.isFunction(r.then))throw i.message="Task "+o+" did not return a promise.",i};return t.forEach(o,function(t,o){var i,c=t.success||t,u=t.fail,f=t.notify;if(n)i=n.then(function(t){if(!c)return t;a[o]=t;var r=c(t);return s(r,o),r},function(t){if(!u)return r.reject(t);var n=u(t);return s(n,o),n},f);else{var h="function"==typeof c?c():t;i=h.then(function(t){return a[o]=t,t},function(t){return r.reject(t)}),s(i,o)}n=i,e=e.then(n)}),e.then(function(){var t=r.defer();return t.resolve(a),t.promise})},r}var c="https://raw.githubusercontent.com/OAI/OpenAPI-Specification/master/schemas/";o.$inject=["$window","$log"],n.$inject=["$window","$log"],e.$inject=["$window","$log"],a.$inject=["$log"],i.$inject=["$log","$http","$q","$rootScope","Helpers","jsyaml"],s.$inject=["$delegate"],t.module("swank",[]).config(["$provide",function(t){t.decorator("$q",s)}]).factory("_",o).factory("jsyaml",n).factory("Showdown",e).filter("parseMD",a).factory("Swank",i)}(angular),function(t){"use strict";function r(){function t(){}return t}r.$inject=[],t.module("swank").factory("SwankDefinitions",r)}(angular),function(t){"use strict";function r(){return{valuesByKey:function(t,r,o){var n=this;return o=o||[],_.flatten(_.map(t,function(t){return t[r]&&_.forEach(t[r],function(t){o.push(t)}),_.isObject(t)&&!_.isArray(t)?n.valuesByKey(t,r,o):o}))}}}t.module("swank").factory("Helpers",r)}(angular),function(t){"use strict";function r(){function r(r,o){t.extend(this,{})}return r}t.module("swank").factory("SwankOperation",r)}(angular),function(t){"use strict";function r(r){function o(r){var o=t.extend(this,r||{});return o}return o.prototype.parse=function(){},o}r.$inject=["SwankOperation"],t.module("swank").factory("SwankPath",r)}(angular),function(t){"use strict";function r(r){function o(r,o){var n=t.extend(this,{paths:{}});return"route"===o.orderPaths&&n.byRoute(r),"method"===o.orderPaths&&n.byMethod(r),"tag"===o.orderPaths&&n.byTag(r,o.tags),n}return o.prototype.byRoute=function(t){var o=this;_.forEach(t,function(t,n){o.paths[n]=new r(t)})},o.prototype.byMethod=function(t){var r=this;r.paths={get:{},put:{},post:{},delete:{},options:{},head:{},patch:{}},_.forEach(t,function(t,o){_.forEach(t,function(t,n){r.paths[n][o]=r.paths[n][o]||{},r.paths[n][o][n]=t})})},o.prototype.byTag=function(t,r){var o=this;r&&_.forEach(r,function(t){o.paths[t]={}}),o.paths.untagged={},_.forEach(t,function(t,r){_.forEach(t,function(t,n){var e=t.tags?t.tags:"untagged";_.forEach(e,function(e){o.paths[e]=o.paths[e]||{},o.paths[e][r]=o.paths[e][r]||{},o.paths[e][r][n]=t})})})},o}r.$inject=["SwankPath"],t.module("swank").factory("SwankPaths",r)}(angular);